{
  "version": "1.0",
  "description": "Lightpad Test Templates - Built-in test runner configurations",
  "templates": [
    {
      "id": "pytest",
      "name": "pytest",
      "language": "Python",
      "extensions": ["py"],
      "command": "python3",
      "args": ["-m", "pytest", "--tb=short", "-v", "${file}"],
      "runSingleTest": {
        "args": ["-m", "pytest", "--tb=short", "-v", "${file}::${testName}"]
      },
      "runFailed": {
        "args": ["-m", "pytest", "--tb=short", "-v", "-k", "${testName}"]
      },
      "workingDirectory": "${workspaceFolder}",
      "outputFormat": "pytest",
      "testFilePattern": "test_*.py"
    },
    {
      "id": "gtest_cmake",
      "name": "Google Test (CTest)",
      "language": "C++",
      "extensions": ["cpp", "cc", "cxx", "h", "hpp"],
      "command": "bash",
      "args": ["-lc", "cmake -S \"${workspaceFolder}\" -B \"${workspaceFolder}/build\" && cmake --build \"${workspaceFolder}/build\" -j && ctest --test-dir \"${workspaceFolder}/build\" --output-on-failure -V"],
      "runSingleTest": {
        "args": ["-lc", "cmake --build \"${workspaceFolder}/build\" -j && ctest --test-dir \"${workspaceFolder}/build\" --output-on-failure -V -R '^${testName}$'"]
      },
      "runFailed": {
        "args": ["-lc", "cmake --build \"${workspaceFolder}/build\" -j && ctest --test-dir \"${workspaceFolder}/build\" --output-on-failure -V -R '${testName}'"]
      },
      "runSuite": {
        "args": ["-lc", "cmake --build \"${workspaceFolder}/build\" -j && ctest --test-dir \"${workspaceFolder}/build\" --output-on-failure -V -R '^${testName}'"]
      },
      "workingDirectory": "${workspaceFolder}",
      "outputFormat": "ctest",
      "testFilePattern": "test_*.cpp"
    },
    {
      "id": "gtest_make",
      "name": "Google Test (Make test)",
      "language": "C++",
      "extensions": ["cpp", "cc", "cxx", "h", "hpp"],
      "command": "make",
      "args": ["-C", "${workspaceFolder}", "test"],
      "workingDirectory": "${workspaceFolder}",
      "outputFormat": "ctest",
      "testFilePattern": "test_*.cpp"
    },
    {
      "id": "go_test",
      "name": "Go Test",
      "language": "Go",
      "extensions": ["go"],
      "command": "go",
      "args": ["test", "-v", "-json", "./..."],
      "runSingleTest": {
        "args": ["test", "-v", "-json", "-run", "^${testName}$", "./..."]
      },
      "runFailed": {
        "args": ["test", "-v", "-json", "-run", "${testName}", "./..."]
      },
      "workingDirectory": "${workspaceFolder}",
      "outputFormat": "go_json"
    },
    {
      "id": "cargo_test",
      "name": "Cargo Test",
      "language": "Rust",
      "extensions": ["rs"],
      "command": "cargo",
      "args": ["test", "--", "--format=json", "-Z", "unstable-options"],
      "runSingleTest": {
        "args": ["test", "${testName}", "--", "--format=json", "-Z", "unstable-options"]
      },
      "runFailed": {
        "args": ["test", "${testName}", "--", "--format=json", "-Z", "unstable-options"]
      },
      "workingDirectory": "${workspaceFolder}",
      "outputFormat": "cargo_json"
    },
    {
      "id": "jest",
      "name": "Jest",
      "language": "JavaScript",
      "extensions": ["js", "jsx", "ts", "tsx"],
      "command": "npx",
      "args": ["jest", "--verbose", "--json", "--outputFile=/dev/stderr"],
      "runSingleTest": {
        "args": ["jest", "--verbose", "-t", "${testName}", "--json", "--outputFile=/dev/stderr"]
      },
      "runFailed": {
        "args": ["jest", "--verbose", "-t", "${testName}", "--json", "--outputFile=/dev/stderr"]
      },
      "workingDirectory": "${workspaceFolder}",
      "outputFormat": "jest_json",
      "testFilePattern": "*.test.{js,jsx,ts,tsx}"
    }
  ]
}
